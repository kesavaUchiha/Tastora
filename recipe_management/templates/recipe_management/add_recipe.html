{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Create Recipe</title>
    <script src="https://unpkg.com/htmx.org@1.11.0"></script>
</head>
<body>
<h1>Create Recipe</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <fieldset>
        <legend>Recipe Info</legend>
        <input type="text" name="title" placeholder="Title" required>
        <select name="category">
            <option value="0">Veg</option>
            <option value="1">Vegan</option>
            <option value="2">Non-Veg</option>
        </select>
        <input type="text" name="cuisine" placeholder="Cuisine" required>
        <select name="difficulty">
            <option value="0">Easy</option>
            <option value="1">Medium</option>
            <option value="2">Hard</option>
        </select>
        <input type="number" name="servings" placeholder="Servings" required>
        <input type="number" name="prep_time" placeholder="Prep Time (min)" required>
        <input type="number" name="total_time" placeholder="Total Time (min)" required>
        <textarea name="instructions" placeholder="Instructions" required></textarea>
        <label>Featured: <input type="checkbox" name="featured"></label>
    </fieldset>

    <fieldset>
        <legend>Nutrition</legend>
        <input type="number" name="calories" placeholder="Calories" required>
        <input type="number" name="protein" placeholder="Protein" required>
        <input type="number" name="fat" placeholder="Fat" required>
        <input type="number" name="sugar" placeholder="Sugar" required>
        <input type="number" name="fiber" placeholder="Fiber" required>
        <input type="number" name="carbohydrates" placeholder="Carbohydrates" required>
    </fieldset>

    <fieldset>
        <legend>Recipe Image</legend>
        <input type="file" name="image">
    </fieldset>

    <fieldset>
        <legend>Ingredients</legend>
        <div id="ingredient-list">
            <div class="ingredient-item">
                <input type="text" name="ingredient_name[]" placeholder="Name" required>
                <input type="number" step="0.01" name="ingredient_quantity[]" placeholder="Quantity" required>
                <select name="ingredient_unit[]">
                    <option value="0">grams</option>
                    <option value="1">kilogram</option>
                    <option value="2">teaspoon</option>
                    <option value="3">tablespoon</option>
                    <option value="4">cup</option>
                    <option value="5">piece</option>
                </select>
                <label>Optional: <input type="checkbox" name="ingredient_optional[]" value="True"></label>
                <button type="button" onclick="this.parentElement.remove()">Delete</button>
            </div>
        </div>
        <button type="button" onclick="addIngredient()">Add Ingredient</button>
    </fieldset>

    <button type="submit">Save Recipe</button>
</form>

<script>
function addIngredient() {
    const container = document.getElementById('ingredient-list');
    const div = document.createElement('div');
    div.classList.add('ingredient-item');
    div.innerHTML = `
        <input type="text" name="ingredient_name[]" placeholder="Name" required>
        <input type="number" step="0.01" name="ingredient_quantity[]" placeholder="Quantity" required>
        <select name="ingredient_unit[]">
            <option value="0">grams</option>
            <option value="1">kilogram</option>
            <option value="2">teaspoon</option>
            <option value="3">tablespoon</option>
            <option value="4">cup</option>
            <option value="5">piece</option>
        </select>
        <label>Optional: <input type="checkbox" name="ingredient_optional[]" value="True"></label>
        <button type="button" onclick="this.parentElement.remove()">Delete</button>
    `;
    container.appendChild(div);
}
</script>

</body>
</html>
