{% extends 'base.html' %}
{% block title %}Add Recipe{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-8 mt-10">
  <h1 class="text-3xl font-bold mb-6 text-gray-800 text-center">ğŸ³ Create a New Recipe</h1>

  <!-- Display Django messages -->
  {% if messages %}
    <div class="mb-6 space-y-2">
      {% for message in messages %}
        <div
          class="p-3 rounded-lg 
            {% if message.tags == 'error' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <form method="post" enctype="multipart/form-data" class="space-y-10">
    {% csrf_token %}

    <!-- Recipe form -->
    {% include "recipe_management/forms/_recipe_form.html" with recipeform=recipeform %}

    <!-- Nutrition form -->
    {% include "recipe_management/forms/_nutrition_form.html" with nutritionform=nutritionform %}

    <!-- Image form -->
    {% include "recipe_management/forms/_image_form.html" with recipe_image=recipe_image %}

    <!-- Ingredients -->
    <fieldset class="border-t border-gray-300 pt-6">
      <legend class="text-xl font-semibold text-gray-700 mb-3">ğŸ§‚ Ingredients</legend>

      <div id="ingredient-list">
        {% include "recipe_management/forms/_ingredient_form.html" %}
      </div>

      <button type="button"
        hx-get="{% url 'recipe_management:add_ingredient_form' %}"
        hx-target="#ingredient-list"
        hx-swap="beforeend"
        class="mt-4 px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition">
        â• Add Ingredient
      </button>
    </fieldset>

    <!-- Submit -->
    <div class="text-center">
      <button type="submit"
        class="w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 transition">
        Save Recipe
      </button>
    </div>
  </form>
</div>
{% endblock %}
