{% load static %}
{% load widget_tweaks %}
<!-- Tailwind + Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<fieldset class="bg-white border border-orange-400 rounded-xl shadow-sm p-6 mt-8">
  <legend class="flex items-center gap-2 text-lg font-semibold text-orange-500 mb-4">
    <i class="bi bi-camera-fill"></i>
    Recipe Image
  </legend>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {% for field in recipe_image %}
      <div class="flex flex-col">
        <label for="{{ field.id_for_label }}" class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-1">
          {% if field.name == "image" %}
            <i class="bi bi-image text-orange-500"></i>
          {% elif field.name == "caption" %}
            <i class="bi bi-card-text text-orange-500"></i>
          {% else %}
            <i class="bi bi-pencil-square text-orange-500"></i>
          {% endif %}
          {{ field.label }}
        </label>

        <div class="relative">
          {{ field|add_class:"block w-full rounded-lg border border-orange-400 focus:border-orange-400 focus:ring focus:ring-orange-100 text-gray-700 px-3 py-2 placeholder-orange-300 transition" }}
        </div>

        {% if field.help_text %}
          <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
        {% endif %}

        {% if field.errors %}
          <p class="text-sm text-red-600 mt-1">{{ field.errors|join:", " }}</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  <!-- Optional Preview (if an image was uploaded) -->
  {% if recipe_image.instance and recipe_image.instance.image %}
    <div class="mt-6">
      <p class="text-sm text-gray-500 mb-2 flex items-center gap-1">
        <i class="bi bi-eye text-orange-500"></i> Current Image Preview:
      </p>
      <img src="{{ recipe_image.instance.image.url }}" alt="Recipe Image Preview"
           class="w-48 h-32 object-cover rounded-lg border border-orange-400 shadow-sm">
    </div>
  {% endif %}
</fieldset>
